"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[485],{4485:(D,d,l)=>{l.r(d),l.d(d,{AuthModule:()=>H});var u=l(6895),g=l(8252),e=l(4006),f=l(2843),h=l(8746),Z=l(262),t=l(4650),P=l(4004),S=l(3606),O=l(7066),b=l(529),A=l(9653),T=l(9668);let F=(()=>{class r{constructor(n,o,s,m){this.http=n,this.store=o,this.boardsStore=s,this.userService=m}signup(n){return this.http.post("/auth/signup",n)}login(n){return this.http.post("/auth/signin",n).pipe((0,P.U)(({token:o})=>{localStorage.setItem("myBearerToken",o);const{id:s,login:m}=this.userService.getInfoFromToken(o);this.store.dispatch(S.av({user:{_id:s,login:m}})),this.boardsStore.dispatch(O.DC({id:s}))}))}}return r.\u0275fac=function(n){return new(n||r)(t.LFG(b.eN),t.LFG(A.yh),t.LFG(A.yh),t.LFG(T.K))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var x=l(8044),c=l(3416),v=l(4859),p=l(9549),U=l(4144),a=l(3546);function L(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.loginFormErrorReq")," "))}function _(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.passwordErrorRequest")," "))}let w=(()=>{class r{constructor(n,o,s,m){this.authService=n,this.router=o,this.notificationService=s,this.translateService=m,this.submitted=!1,this.loginForm=new e.cw({login:new e.NI("",[e.kI.required]),password:new e.NI("",[e.kI.required])},{updateOn:"submit"})}handleHTTPError(n){return this.notificationService.openNotification(this.translateService.instant(401===n.status?"API_ERRORS.authError":400===n.status?"API_ERRORS.bodyRequest":"API_ERRORS.unknowError")),(0,f._)(()=>n)}onSubmit(){this.loginForm.valid&&(this.submitted=!0,this.authService.login({login:this.loginForm.controls.login.value,password:this.loginForm.controls.password.value}).pipe((0,h.x)(()=>{this.submitted=!1}),(0,Z.K)(n=>this.handleHTTPError(n))).subscribe({next:()=>this.router.navigateByUrl("/"),error:()=>{}}))}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(F),t.Y36(g.F0),t.Y36(x.g),t.Y36(c.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-login-page"]],decls:30,vars:25,consts:[[1,"mat-card-login","bg-white","rounded-lg","shadow-lg","p-4","md:p-8","lg:p-12"],[1,"text-lg","md:text-xl","lg:text-2xl","mb-2"],[1,"text-sm","md:text-base","lg:text-lg","mb-4"],[1,"form","flex","flex-col","items-center","md:items-start",3,"formGroup","submit"],["appearance","outline",1,"full-width","mb-4","md:mb-6","lg:mb-8","w-full","md:w-auto"],["id","login","matInput","","formControlName","login",1,"w-full"],[4,"ngIf"],["id","password","type","password","matInput","","formControlName","password",1,"w-full"],["type","submit","color","warn","mat-flat-button","",1,"form__btn","full-width","hover:bg-rose-600",3,"disabled"],["routerLink","/auth/sign-up"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-card-subtitle",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"mat-card-content")(8,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(9,"mat-form-field",4)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",5),t.YNc(14,L,3,3,"mat-error",6),t.qZA(),t.TgZ(15,"mat-form-field",4)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",7),t.YNc(20,_,3,3,"mat-error",6),t.qZA(),t.TgZ(21,"button",8),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-card-footer"),t._uU(25),t.ALo(26,"translate"),t.TgZ(27,"a",9),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,11,"LOGIN_PAGE.title")),t.xp6(3),t.Oqu(t.lcZ(6,13,"LOGIN_PAGE.subtitle")),t.xp6(3),t.Q6J("formGroup",o.loginForm),t.xp6(3),t.Oqu(t.lcZ(12,15,"FORM.labelLogin")),t.xp6(3),t.Q6J("ngIf",null==o.loginForm||null==o.loginForm.controls||null==o.loginForm.controls.login||null==o.loginForm.controls.login.errors?null:o.loginForm.controls.login.errors.required),t.xp6(3),t.Oqu(t.lcZ(18,17,"FORM.labelPass")),t.xp6(3),t.Q6J("ngIf",null==o.loginForm||null==o.loginForm.controls||null==o.loginForm.controls.password||null==o.loginForm.controls.password.errors?null:o.loginForm.controls.password.errors.required),t.xp6(1),t.Q6J("disabled",o.submitted),t.xp6(1),t.hij(" ",t.lcZ(23,19,"LOGIN_PAGE.button")," "),t.xp6(3),t.hij(" ",t.lcZ(26,21,"LOGIN_PAGE.no-account")," "),t.xp6(3),t.Oqu(t.lcZ(29,23,"LOGIN_PAGE.link")))},dependencies:[u.O5,v.lW,p.KE,p.hX,p.TO,U.Nt,a.a8,a.dn,a.rt,a.$j,a.n5,g.rH,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,c.X$],styles:["[_nghost-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.mat-card-login[_ngcontent-%COMP%]{max-width:360px;margin:0 10px;padding:40px}.mat-card-footer[_ngcontent-%COMP%]{margin:30px 0 -20px}.form__btn[_ngcontent-%COMP%]{height:44px}"]}),r})();var I=l(3900),C=l(1591);function M(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.nameFormErrorReq")," "))}function R(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.nameFormErrorMinL")," "))}function N(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.nameFormErrorMaxL")," "))}function E(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.nameFormErrorRegx")," "))}function q(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.loginFormErrorReq")," "))}function y(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.loginFormErrorMinL")," "))}function J(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.loginFormErrorMaxL")," "))}function G(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.loginFormErrorRegx")," "))}function j(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FORM.passwordErrorRequest")," "))}function Y(r,i){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.value," ")}}function Q(r,i){if(1&r&&(t.ynx(0),t.YNc(1,Y,2,1,"li",6),t.BQk()),2&r){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",n.value)}}function z(r,i){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ul"),t.YNc(4,Q,2,1,"ng-container",12),t.ALo(5,"keyvalue"),t.qZA()()),2&r){const n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"FORM.passFormErrorRegx")," "),t.xp6(3),t.Q6J("ngForOf",t.lcZ(5,4,null==n.signUpForm.controls.password.errors?null:n.signUpForm.controls.password.errors.errorMsg))}}const B=function(r){return{mb60:r}},K=[{path:"sign-up",component:(()=>{class r{constructor(n,o,s,m,W){this.authService=n,this.router=o,this.notificationService=s,this.formValidationService=m,this.translateService=W,this.submitted=!1,this.signUpForm=new e.cw({name:new e.NI("",[e.kI.required,e.kI.minLength(2),e.kI.maxLength(30),this.formValidationService.ownValidator(/^([A-Za-z\u0410]+)( ?)([A-Za-z\u0410]+)?$/i)]),login:new e.NI("",[e.kI.required,e.kI.minLength(2),e.kI.maxLength(30),this.formValidationService.ownValidator(/^([A-Za-z0-9]+)$/i)]),password:new e.NI("",[e.kI.required,this.formValidationService.passValidator()])},{updateOn:"submit"})}handleHTTPError(n){return this.notificationService.openNotification(this.translateService.instant(401===n.status?"API_ERRORS.authError":400===n.status?"API_ERRORS.bodyRequest":"API_ERRORS.unknowError")),(0,f._)(()=>n)}onSubmit(){this.signUpForm.valid&&(this.submitted=!0,this.authService.signup(this.signUpForm.value).pipe((0,h.x)(()=>{this.submitted=!1}),(0,I.w)(()=>this.authService.login({login:this.signUpForm.controls.login.value,password:this.signUpForm.controls.password.value})),(0,Z.K)(n=>this.handleHTTPError(n))).subscribe({next:()=>this.router.navigateByUrl("/"),error:()=>{}}))}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(F),t.Y36(g.F0),t.Y36(x.g),t.Y36(C.m),t.Y36(c.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-signup-page"]],decls:43,vars:39,consts:[[1,"mat-card-signup","bg-white","rounded-lg","shadow-lg","p-4","md:p-8","lg:p-12"],[1,"text-lg","md:text-xl","lg:text-2xl","mb-2"],[1,"text-sm","md:text-base","lg:text-lg","mb-4"],[1,"form","flex","flex-col","items-center","md:items-start",3,"formGroup","submit"],["appearance","outline",1,"full-width","mb-4","md:mb-6","lg:mb-8","w-full","md:w-auto"],["id","name","matInput","","formControlName","name",1,"w-full"],[4,"ngIf"],["id","login","matInput","","formControlName","login",1,"w-full"],["appearance","outline",1,"full-width","mb-4","md:mb-6","lg:mb-8","w-full","md:w-auto",3,"ngClass"],["id","password","type","password","matInput","","formControlName","password",1,"w-full"],["type","submit","color","warn","mat-flat-button","",1,"form__btn","full-width","hover:bg-rose-600",3,"disabled"],["routerLink","/auth/login"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-card-subtitle",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"mat-card-content")(8,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(9,"mat-form-field",4)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",5),t.YNc(14,M,3,3,"mat-error",6),t.YNc(15,R,3,3,"mat-error",6),t.YNc(16,N,3,3,"mat-error",6),t.YNc(17,E,3,3,"mat-error",6),t.qZA(),t.TgZ(18,"mat-form-field",4)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",7),t.YNc(23,q,3,3,"mat-error",6),t.YNc(24,y,3,3,"mat-error",6),t.YNc(25,J,3,3,"mat-error",6),t.YNc(26,G,3,3,"mat-error",6),t.qZA(),t.TgZ(27,"mat-form-field",8)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",9),t.YNc(32,j,3,3,"mat-error",6),t.YNc(33,z,6,6,"mat-error",6),t.qZA(),t.TgZ(34,"button",10),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"mat-card-footer"),t._uU(38),t.ALo(39,"translate"),t.TgZ(40,"a",11),t._uU(41),t.ALo(42,"translate"),t.qZA()()()()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,21,"SIGNUP_PAGE.title")),t.xp6(3),t.hij(" ",t.lcZ(6,23,"SIGNUP_PAGE.subtitle")," "),t.xp6(3),t.Q6J("formGroup",o.signUpForm),t.xp6(3),t.Oqu(t.lcZ(12,25,"FORM.labelName")),t.xp6(3),t.Q6J("ngIf",null==o.signUpForm.controls.name.errors?null:o.signUpForm.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.name.errors?null:o.signUpForm.controls.name.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.name.errors?null:o.signUpForm.controls.name.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.name.errors?null:o.signUpForm.controls.name.errors.errorMsg),t.xp6(3),t.Oqu(t.lcZ(21,27,"FORM.labelLogin")),t.xp6(3),t.Q6J("ngIf",null==o.signUpForm.controls.login.errors?null:o.signUpForm.controls.login.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.login.errors?null:o.signUpForm.controls.login.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.login.errors?null:o.signUpForm.controls.login.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.login.errors?null:o.signUpForm.controls.login.errors.errorMsg),t.xp6(1),t.Q6J("ngClass",t.VKq(37,B,null==o.signUpForm.controls.password.errors?null:o.signUpForm.controls.password.errors.errorMsg)),t.xp6(2),t.Oqu(t.lcZ(30,29,"FORM.labelPass")),t.xp6(3),t.Q6J("ngIf",null==o.signUpForm.controls.password.errors?null:o.signUpForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.signUpForm.controls.password.errors?null:o.signUpForm.controls.password.errors.errorMsg),t.xp6(1),t.Q6J("disabled",o.submitted),t.xp6(1),t.hij(" ",t.lcZ(36,31,"SIGNUP_PAGE.button")," "),t.xp6(3),t.hij(" ",t.lcZ(39,33,"SIGNUP_PAGE.haveAccount")," "),t.xp6(3),t.Oqu(t.lcZ(42,35,"SIGNUP_PAGE.link")))},dependencies:[u.mk,u.sg,u.O5,v.lW,p.KE,p.hX,p.TO,U.Nt,a.a8,a.dn,a.rt,a.$j,a.n5,g.rH,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,u.Nd,c.X$],styles:["[_nghost-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.mat-card-signup[_ngcontent-%COMP%]{max-width:360px;margin:0 10px;padding:40px}.mat-card-footer[_ngcontent-%COMP%]{margin:30px 0 -20px}.mat-error[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:4px}.mat-error[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{font-size:16px}.form__btn[_ngcontent-%COMP%]{height:44px}.mb60[_ngcontent-%COMP%]{margin-bottom:60px}"]}),r})()},{path:"login",component:w}];let V=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.Bz.forChild(K),g.Bz]}),r})();var $=l(6335),X=l(3602);let H=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.ez,$.q,V,e.UX,X.m]}),r})()}}]);